{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "environment": {
            "value": "qa"
        },
        "organization": {
            "value": "abc"
        },
        "buildver": {
            "value": "1.0.0"
        },
        "location": {
            "value": "Uk West"
        },
        "app_plans": {
            "value": [
                {
                    "name": "appplan1",
                    "properties": {
                        "numberOfWorkers": 1
                    },
                    "sku": {
                        "capacity": "1",
                        "name": "S1",
                        "family": "S",
                        "size": "S1",
                        "tier": "Standard"
                    }
                },
                {
                    "name": "appplan2",
                    "properties": {
                        "numberOfWorkers": 1
                    },
                    "sku": {
                        "capacity": "1",
                        "name": "S1",
                        "family": "S",
                        "size": "S1",
                        "tier": "Standard"
                    }
                }
            ]
        },
        "apps": {
            "value": [
                {
                    "name": "appservice1",
                    "kind": "app",
                    "hostingPlan": "appplan1",
                    "clientAffinityEnabled": false,
                    "hasDeploymentSlot": true,
                    "httpsOnly": true,
                    "appSettings": {
                        "sticky_app_settings": [
                            "WEBSITE_LOCAL_CACHE_OPTION",
                            "WEBSITE_LOCAL_CACHE_SIZEINMB"
                        ],
                        "production": {
                            "WEBSITE_LOCAL_CACHE_OPTION": "Always",
                            "WEBSITE_LOCAL_CACHE_SIZEINMB": "300",
                            "WEBSITE_LOAD_CERTIFICATES": "*",
                            "APPINSIGHTS_INSTRUMENTATIONKEY": "C",
                            "APPINSIGHTS_PROFILERFEATURE_VERSION": "1.0.0",
                            "APPINSIGHTS_SNAPSHOTFEATURE_VERSION": "1.0.0",
                            "APPLICATIONINSIGHTS_CONNECTION_STRING": "InstrumentationKey=00000-0000-000-0000",
                            "ApplicationInsightsAgent_EXTENSION_VERSION": "~2",
                            "DiagnosticServices_EXTENSION_VERSION": "~3",
                            "InstrumentationEngine_EXTENSION_VERSION": "disabled",
                            "SnapshotDebugger_EXTENSION_VERSION": "disabled",
                            "WEBSITE_RUN_FROM_PACKAGE": "1",
                            "XDT_MicrosoftApplicationInsights_BaseExtensions": "disabled",
                            "XDT_MicrosoftApplicationInsights_Mode": "recommended"
                        },
                        "staging": {
                            "WEBSITE_LOAD_CERTIFICATES": "*",
                            "APPINSIGHTS_INSTRUMENTATIONKEY": "00000-0000-000-0000",
                            "APPINSIGHTS_PROFILERFEATURE_VERSION": "1.0.0",
                            "APPINSIGHTS_SNAPSHOTFEATURE_VERSION": "1.0.0",
                            "APPLICATIONINSIGHTS_CONNECTION_STRING": "InstrumentationKey=00000-0000-000-0000",
                            "ApplicationInsightsAgent_EXTENSION_VERSION": "~2",
                            "DiagnosticServices_EXTENSION_VERSION": "~3",
                            "InstrumentationEngine_EXTENSION_VERSION": "disabled",
                            "SnapshotDebugger_EXTENSION_VERSION": "disabled",
                            "WEBSITE_RUN_FROM_PACKAGE": "1",
                            "XDT_MicrosoftApplicationInsights_BaseExtensions": "disabled",
                            "XDT_MicrosoftApplicationInsights_Mode": "recommended"
                        }
                    },
                    "siteProperties": {
                        "netFrameworkVersion": "v4.5"
                    }
                },
                {
                    "name": "appservice2",
                    "kind": "app",
                    "hostingPlan": "appplan2",
                    "clientAffinityEnabled": true,
                    "hasDeploymentSlot": true,
                    "httpsOnly": false,
                    "appSettings": {
                        "sticky_app_settings": [
                            "WEBSITE_LOCAL_CACHE_OPTION",
                            "WEBSITE_LOCAL_CACHE_SIZEINMB"
                        ],
                        "production": {
                            "WEBSITE_LOCAL_CACHE_OPTION": "Always",
                            "WEBSITE_LOCAL_CACHE_SIZEINMB": "300",
                            "WEBSITE_LOAD_CERTIFICATES": "*",
                            "APPINSIGHTS_INSTRUMENTATIONKEY": "00000-0000-000-0000",
                            "APPINSIGHTS_PROFILERFEATURE_VERSION": "1.0.0",
                            "APPINSIGHTS_SNAPSHOTFEATURE_VERSION": "1.0.0",
                            "APPLICATIONINSIGHTS_CONNECTION_STRING": "InstrumentationKey=00000-0000-000-0000",
                            "ApplicationInsightsAgent_EXTENSION_VERSION": "~2",
                            "DiagnosticServices_EXTENSION_VERSION": "~3",
                            "InstrumentationEngine_EXTENSION_VERSION": "disabled",
                            "SnapshotDebugger_EXTENSION_VERSION": "disabled",
                            "WEBSITE_RUN_FROM_PACKAGE": "1",
                            "XDT_MicrosoftApplicationInsights_BaseExtensions": "disabled",
                            "XDT_MicrosoftApplicationInsights_Mode": "recommended"
                        },
                        "staging": {
                            "WEBSITE_LOAD_CERTIFICATES": "*",
                            "APPINSIGHTS_INSTRUMENTATIONKEY": "00000-0000-000-0000",
                            "APPINSIGHTS_PROFILERFEATURE_VERSION": "1.0.0",
                            "APPINSIGHTS_SNAPSHOTFEATURE_VERSION": "1.0.0",
                            "APPLICATIONINSIGHTS_CONNECTION_STRING": "InstrumentationKey=00000-0000-000-0000",
                            "ApplicationInsightsAgent_EXTENSION_VERSION": "~2",
                            "DiagnosticServices_EXTENSION_VERSION": "~3",
                            "InstrumentationEngine_EXTENSION_VERSION": "disabled",
                            "SnapshotDebugger_EXTENSION_VERSION": "disabled",
                            "WEBSITE_RUN_FROM_PACKAGE": "1",
                            "XDT_MicrosoftApplicationInsights_BaseExtensions": "disabled",
                            "XDT_MicrosoftApplicationInsights_Mode": "recommended"
                        }
                    },
                    "siteProperties": {
                        "netFrameworkVersion": "v4.5"
                    }
                },
                {
                    "name": "functionapp1",
                    "kind": "functionapp",
                    "hostingPlan": "appplan1",
                    "clientAffinityEnabled": false,
                    "hasDeploymentSlot": true,
                    "httpsOnly": false,
                    "appSettings": {
                        "sticky_app_settings": [
                            "WEBSITE_LOCAL_CACHE_OPTION",
                            "WEBSITE_LOCAL_CACHE_SIZEINMB",
                            "AzureServiceBusPrimaryConnectionString",
                            "AzureServiceBusTopicName",
                            "AzureWebJobsDashboard",
                            "AzureWebJobsStorage"
                        ],
                        "production": {
                            "WEBSITE_LOCAL_CACHE_OPTION": "Always",
                            "WEBSITE_LOCAL_CACHE_SIZEINMB": "300",
                            "WEBSITE_LOAD_CERTIFICATES": "*",
                            "APPINSIGHTS_INSTRUMENTATIONKEY": "00000-0000-000-0000",
                            "AzureServiceBusTopicName": "message-topic",
                            "FUNCTIONS_EXTENSION_VERSION": "~2",
                            "FUNCTIONS_WORKER_RUNTIME": "dotnet",
                            "WEBSITE_RUN_FROM_PACKAGE": "1",
                            "AzureServiceBusPrimaryConnectionString": "@Microsoft.KeyVault(SecretUri=https://kv.vault.azure.net/secrets/)",
                            "AzureWebJobsDashboard": "@Microsoft.KeyVault(SecretUri=https://kv.vault.azure.net/secrets/",
                            "AzureWebJobsStorage": "@Microsoft.KeyVault(SecretUri=https://kv.vault.azure.net/secrets/)" 
                        },
                        "staging": {
                            "WEBSITE_LOAD_CERTIFICATES": "*",
                            "APPINSIGHTS_INSTRUMENTATIONKEY": "00000-0000-000-0000",
                            "AzureServiceBusTopicName": "DUMMY-VALUE-TO-PREVENT-SLOT-WORKING",
                            "FUNCTIONS_EXTENSION_VERSION": "~2",
                            "FUNCTIONS_WORKER_RUNTIME": "dotnet",
                            "WEBSITE_RUN_FROM_PACKAGE": "1",
                            "AzureServiceBusPrimaryConnectionString": "DUMMY-VALUE-TO-PREVENT-SLOT-WORKING",
                            "AzureWebJobsDashboard": "DUMMY-VALUE-TO-PREVENT-SLOT-WORKING",
                            "AzureWebJobsStorage": "DUMMY-VALUE-TO-PREVENT-SLOT-WORKING"                           
                        }
                    },
                    "siteProperties": {
                        "netFrameworkVersion": "v4.5"
                    }
                },
                {
                    "name": "functionapp2",
                    "kind": "functionapp",
                    "hostingPlan": "appplan2",
                    "clientAffinityEnabled": false,
                    "hasDeploymentSlot": true,
                    "httpsOnly": true,
                    "appSettings": {
                        "sticky_app_settings": [
                            "WEBSITE_LOCAL_CACHE_OPTION",
                            "WEBSITE_LOCAL_CACHE_SIZEINMB",
                            "AzureServiceBusPrimaryConnectionString",
                            "AzureServiceBusTopicName",
                            "AzureWebJobsDashboard",
                            "AzureWebJobsStorage"
                        ],
                        "production": {
                            "WEBSITE_LOCAL_CACHE_OPTION": "Always",
                            "WEBSITE_LOCAL_CACHE_SIZEINMB": "300",
                            "WEBSITE_LOAD_CERTIFICATES": "*",
                            "APPINSIGHTS_INSTRUMENTATIONKEY": "00000-0000-000-0000",
                            "AzureServiceBusTopicName": "message-topic",
                            "FUNCTIONS_EXTENSION_VERSION": "~2",
                            "FUNCTIONS_WORKER_RUNTIME": "dotnet",
                            "WEBSITE_RUN_FROM_PACKAGE": "1",
                            "AzureServiceBusPrimaryConnectionString": "@Microsoft.KeyVault(SecretUri=https://kv.vault.azure.net/secrets/)",
                            "AzureWebJobsDashboard": "@Microsoft.KeyVault(SecretUri=https://kv.vault.azure.net/secrets/",
                            "AzureWebJobsStorage": "@Microsoft.KeyVault(SecretUri=https://kv.vault.azure.net/secrets/)" 
                        },
                        "staging": {
                            "WEBSITE_LOAD_CERTIFICATES": "*",
                            "APPINSIGHTS_INSTRUMENTATIONKEY": "00000-0000-000-0000",
                            "AzureServiceBusTopicName": "DUMMY-VALUE-TO-PREVENT-SLOT-WORKING",
                            "FUNCTIONS_EXTENSION_VERSION": "~2",
                            "FUNCTIONS_WORKER_RUNTIME": "dotnet",
                            "WEBSITE_RUN_FROM_PACKAGE": "1",
                            "AzureServiceBusPrimaryConnectionString": "DUMMY-VALUE-TO-PREVENT-SLOT-WORKING",
                            "AzureWebJobsDashboard": "DUMMY-VALUE-TO-PREVENT-SLOT-WORKING",
                            "AzureWebJobsStorage": "DUMMY-VALUE-TO-PREVENT-SLOT-WORKING"                           
                        }
                    },
                    "siteProperties": {
                        "netFrameworkVersion": "v4.5"
                    }
                }
            ]
        }
    }
}
